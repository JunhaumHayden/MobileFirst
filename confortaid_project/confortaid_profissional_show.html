<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>ConfortAid App</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <!-- ... -->
        <link rel="shortcut icon" type="imagex/png" href="/PHP/assets/icon.ico">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,300;1,200;1,400&family=Red+Hat+Display:wght@400;500;700&family=Roboto&display=swap"
        rel="stylesheet">
        <!-- ... -->
        <link rel='stylesheet' type='text/css' media='screen' href='./assets/css/style.css'>
        <!-- font-awesome -->
        <link rel='stylesheet' type='text/css' media='screen'         
                href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css'>
            <!-- ... -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    </head>
    <body>
        <header>
            <h1>üåê ConfortAid üêò</h1>
        </header>
         <!-- barra de navegacao da pagina -->
        <nav>
            <ul>
                <li><a href="../">In√≠cio</a></li>
                <li><a href="#tutorials">Tutoriais</a></li>
                <li><a href="tel:+5548988900001">Contato</a></li>
            </ul>
        </nav>
         <!-- Bot√£o para alternar a visibilidade -->
        <nav class="navigation">
            <button type="button" class="btn btn-primary" onclick="navega('home')">
                <i class="fa-solid fa-home"></i>
                Home
            </button>
            <button type="button" class="btn btn-primary" onclick="navega('services')">
                <i class="fa-solid fa-concierge-bell"></i>
                Servi√ßos
            </button>
            <button type="button" class="btn btn-primary" onclick="navega('profile')">
                <i class="fa-solid fa-file"></i>
                Profissionais
            </button>
            <button type="button" class="btn btn-primary" onclick="navega('Reviews')">
                <i class="fa-solid fa-star"></i>
                
                Avalia√ß√µes
            </button>
        </nav>
         <!-- Elemento que ser√° alternado -->
         <!-- Apresentacao Elemento Home -->
        <div id="home" class="tela show">
            <h3>HOME</h3>
            <!-- Conte√∫do da p√°gina de apresenta√ß√£o -->
            <div id="presentation-content"></div>
        </div>
            <!-- Apresentacao Elemento Servicos com axios-->
        <div id="services" class="tela collapse">
            <div class="container-services">
                <h4>Lista de Servi√ßos</h4>
                <div class="row" id="service"></div>
                <div id="error-message" class="error-message"></div>
            </div>
        </div>

        <!-- P√°gina de detalhes do servi√ßo -->
        <div id="service-details" class="tela collapse">
            <h3>Detalhes do Servi√ßo</h3>
            <div id="service-details-content"></div>
            <div id="schedule-form">
                <h4>Agendar Servi√ßo</h4>
                <form id="agendamento-form">
                    <div class="mb-3">
                        <label for="cliente-id" class="form-label">ID do Cliente</label>
                        <input type="number" class="form-control" id="cliente-id" required>
                    </div>
                    <div class="mb-3">
                        <label for="data-hora" class="form-label">Data e Hora</label>
                        <input type="datetime-local" class="form-control" id="data-hora" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Agendar</button>
                </form>
                <div id="schedule-message" class="mt-3"></div>
            </div>
        </div>
            <!-- Apresentacao Elemento profile com axios-->
        <div id="profile" class="tela collapse">
            <div class="container-profile-profissional">
                <h4>Lista de Perfis Profissionais</h4>
                <div class="row" id="produto-list"></div>
                <div id="error-message" class="error-message"></div>
            </div>
        </div>
         <!-- Apresentacao de Avaliacoes e parceiros do aplicativo-->
        <div id="Reviews" class="tela collapse">
            <h3>Avaliacoes</h3>
            <section class="painel-cartoes">

                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <!-- elemnto <i> utilizado para inserir o icone do font-awesome. -->
                        <a href="https://junhaumhayden.github.io/publish/">Landingpage</a>
                </div>

                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                        <a href="https://junhaumhayden.github.io/publish/gatinhos.html">Ver Gatinhos</a>
                </div>

                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <a href="https://junhaumhayden.github.io/publish/flexturismo.html">FlexTurismo</a>
                </div>

                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <a href="https://junhaumhayden.github.io/publish/contato.html">Deixe um coment√°rio</a>
                </div>

                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <!-- elemnto <i> utilizado para inserir o icone do font-awesome. -->
                    Um Cart√£o
                </div>
                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <!-- elemnto <i> utilizado para inserir o icone do font-awesome. -->
                    Oto Cart√£o
                </div>
                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <!-- elemnto <i> utilizado para inserir o icone do font-awesome. -->
                    Mais Oto Cart√£o
                </div>
                <div class="cartao">
                    <i class="fa-solid fa-folder"></i>
                    <!-- elemnto <i> utilizado para inserir o icone do font-awesome. -->
                    Ultimo Cart√£o
                </div>
            </section>
        </div>

        <footer>
            <div class="footer-container">
                <div class="logo">
                    <img src="/PHP/assets/icons/icon36x36.ico" width="30" alt="Logo">
                </div>
                <div class="info">
                    <div>&copy; 2024 HTML / CSS / JavaScript / BootStrap</div>
                    <div>Desenvolvido por: Carlos Hayden Junior</div>
                </div>
                <div class="icons">
                    <img src="/PHP/assets/icons/icon-html5-48.png" width="20" alt="HTML Icon">
                    <img src="/PHP/assets/icons/icon-css3-48.ico" width="20" alt="CSS Icon">
                    <img src="/PHP/assets/icons/icons8-js-48.png" width="20" alt="JS Icon">
                </div>
            </div>
            
        </footer>

        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Importando a biblioteca Axios a partir de uma CDN -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

        <script>
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('/service-worker.js')
                .then(() => console.log('Service Worker registrado com sucesso.'))
                .catch(err => console.error('Erro ao registrar o Service Worker:', err));
            }
        </script>
          
        <!-- Script para alternar a tela ativa -->
        <script>

            // Fun√ß√£o para carregar o conte√∫do da p√°gina de apresenta√ß√£o
            function carregarApresentacao() {
                    const presentationUrl = './assets/html/presentation.html';
                    axios.get(presentationUrl)
                        .then(response => {
                            document.getElementById('presentation-content').innerHTML = response.data;
                        })
                        .catch(error => {
                            console.error('Erro ao carregar a apresenta√ß√£o:', error);
                            document.getElementById('presentation-content').innerHTML = 'Ocorreu um erro ao carregar a apresenta√ß√£o. Tente novamente mais tarde.';
                        });
                }

            // Fun√ß√£o para carregar os detalhes do servi√ßo
            function carregarDetalhesServico(servicoId) {
                const apiServicoDetalhesUrl = `http://192.168.0.80:8080/api/servicos/${servicoId}`;
                axios.get(apiServicoDetalhesUrl)
                    .then(response => {
                        const servico = response.data;
                        const detailsContent = `
                            <h5>${servico.nome}</h5>
                            <p>${servico.descricao}</p>
                            <p>Pre√ßo: R$ ${servico.preco.toFixed(2)}</p>
                            <p>Dura√ß√£o: ${servico.duracao} minutos</p>
                            <p>Profissional: ${servico.profissional.nome}</p>
                            <p>Especialidade: ${servico.profissional.especialidade}</p>
                            <p>Registro Profissional: ${servico.profissional.registroProfissional}</p>
                            <p>Contato:</p>
                            <p>Email: ${servico.profissional.email}</p>
                            <p>telefone: ${servico.profissional.telefone}</p>
                        `;
                        document.getElementById('service-details-content').innerHTML = detailsContent;
                        document.getElementById('agendamento-form').dataset.servicoId = servico.id;
                    })
                    .catch(error => {
                        console.error('Erro ao carregar os detalhes do servi√ßo:', error);
                        document.getElementById('service-details-content').innerHTML = 'Ocorreu um erro ao carregar os detalhes do servi√ßo. Tente novamente mais tarde.';
                    });
            }

            // Fun√ß√£o para enviar o agendamento
            document.getElementById('agendamento-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const servicoId = this.dataset.servicoId;
                const clienteId = document.getElementById('cliente-id').value;
                const dataHora = document.getElementById('data-hora').value;

                const agendamento = {
                    cliente: { id: clienteId },
                    servico: { id: servicoId },
                    dataHora: dataHora
                };

                axios.post('http://192.168.0.80:8080/api/agendamentos', agendamento)
                    .then(response => {
                        document.getElementById('schedule-message').textContent = 'Agendamento realizado com sucesso!';
                    })
                    .catch(error => {
                        console.error('Erro ao realizar o agendamento:', error);
                        document.getElementById('schedule-message').textContent = 'Ocorreu um erro ao realizar o agendamento. Tente novamente mais tarde.';
                    });
            });

            

            // Fun√ß√£o para criar o card do servi√ßo
            function criarCardServico(servico) {
                const col = document.createElement('div');
                col.className = 'col-md-4 mb-4';
                const card = document.createElement('div');
                card.className = 'card h-100';

                const cardBody = document.createElement('div');
                cardBody.className = 'card-body d-flex flex-column';

                const title = document.createElement('h5');
                title.className = 'card-title';
                title.textContent = servico.nome;

                const descricao = document.createElement('p');
                descricao.className = 'card-text';
                descricao.textContent = servico.descricao;

                const preco = document.createElement('p');
                preco.className = 'price';
                preco.textContent = 'Pre√ßo: R$ ' + servico.preco.toFixed(2);

                const duracao = document.createElement('p');
                duracao.className = 'duration';
                duracao.textContent = 'Dura√ß√£o: ' + servico.duracao + ' minutos';

                const profissional = document.createElement('p');
                profissional.className = 'professional';
                profissional.textContent = 'Profissional: ' + servico.profissional.nome;

                cardBody.appendChild(title);
                cardBody.appendChild(descricao);
                cardBody.appendChild(preco);
                cardBody.appendChild(duracao);
                cardBody.appendChild(profissional);

                card.dataset.servicoId = servico.id;
                card.appendChild(cardBody);
                col.appendChild(card);

                return col;
            }

            // Fun√ß√£o para carregar os servi√ßos ao clicar na aba
            function carregarServicos() {
                // Endpoint da API de servi√ßos
            const apiServicosUrl = 'http://192.168.0.80:8080/api/servicos';
                axios.get(apiServicosUrl)
                    .then(response => {
                        const serviceList = document.getElementById('service');
                        serviceList.innerHTML = ''; // Limpa a lista antes de adicionar novos itens
                        response.data.forEach(servico => {
                            const card = criarCardServico(servico);
                            serviceList.appendChild(card);
                        });
                    })
                    .catch(error => {
                        console.error('Erro:', error);
                        const errorMessage = document.getElementById('error-message');
                        errorMessage.textContent = 'Ocorreu um erro ao carregar os servi√ßos. Tente novamente mais tarde.';
                    });
            }

            //Fun√ß√£o para criar o card do profissional
            function criarCardProfissional(profissional) {
                const col = document.createElement('div');
                col.className = 'col-md-4 mb-4';
                const card = document.createElement('div');
                card.className = 'card h-100';

                const cardBody = document.createElement('div');
                cardBody.className = 'card-body d-flex flex-column';

                const title = document.createElement('h5');
                title.className = 'card-title';
                title.textContent = profissional.nome;

                const especialidade = document.createElement('p');
                especialidade.className = 'specialty';
                especialidade.textContent = 'Especialidade: ' + profissional.especialidade;

                const experiencia = document.createElement('p');
                experiencia.className = 'experience';
                experiencia.textContent = 'Experi√™ncia: ' + profissional.experiencia + ' anos';

                const contato = document.createElement('p');
                contato.className = 'contact';
                contato.textContent = 'Contato: ' + profissional.contato;

                cardBody.appendChild(title);
                cardBody.appendChild(especialidade);
                cardBody.appendChild(experiencia);
                cardBody.appendChild(contato);

                card.appendChild(cardBody);
                col.appendChild(card);

                return col;
            }

            // Fun√ß√£o para carregar os profissionais ao clicar na aba
            function carregarProfissionais() {
                const apiProfissionaisUrl = 'http://192.168.0.80:8080/api/profissionais';

                axios.get(apiProfissionaisUrl)
                    .then(response => {
                        const profissionalList = document.getElementById('produto-list');
                        profissionalList.innerHTML = ''; // Limpa a lista antes de adicionar novos itens
                        response.data.forEach(profissional => {
                            const card = criarCardProfissional(profissional);
                            profissionalList.appendChild(card);
                        });
                    })
                    .catch(error => {
                        console.error('Erro:', error);
                        const errorMessage = document.getElementById('error-message');
                        errorMessage.textContent = 'Ocorreu um erro ao carregar os profissionais. Tente novamente mais tarde.';
                    });
            }


            function navega(destino){
                let telas = document.getElementsByClassName('tela')
                Array.from(telas).forEach(element => {
                    element.classList.remove('show')
                    element.classList.add('collapse')
                });
                document.getElementById(destino).classList.remove('collapse')
                document.getElementById(destino).classList.add('show')
            }
            // Carrega a apresenta√ß√£o ao abrir a aba Home
            document.addEventListener('DOMContentLoaded', carregarApresentacao);
            // Adiciona o evento de clique ao bot√£o de servi√ßos
            document.querySelector('button[onclick="navega(\'services\')"]').addEventListener('click', carregarServicos);
            // Adiciona o evento de clique ao bot√£o de profissionais
            document.querySelector('button[onclick="navega(\'profile\')"]').addEventListener('click', carregarProfissionais);
            
            // Adiciona o evento de clique aos cards de servi√ßo
            document.getElementById('service').addEventListener('click', function(event) {
                const card = event.target.closest('.card');
                if (card) {
                    if (!card.dataset.servicoId) {
                        console.error('ID do servi√ßo n√£o encontrado no card.');
                        return;
                    }
                    const servicoId = card.dataset.servicoId;
                    carregarDetalhesServico(servicoId);
                    navega('service-details');
                }
            });
  
        </script>
    </body>
</html> 




